<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Prociono','Helvetica',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:#222;font-family:'Prociono','Helvetica',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Prociono','Helvetica',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Prociono','Helvetica',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Prociono','Helvetica',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Prociono','Helvetica',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Prociono','Helvetica',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Prociono','Helvetica',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#222;}</style><meta name="generator" content="Gatsby 5.12.5"/><meta name="theme-color" content="#222"/><meta data-react-helmet="true" http-equiv="Permissions-Policy" content="interest-cohort=()"/><meta data-react-helmet="true" name="description" content="When going through some old projects I realized that I hadn’t particularly kept
up with my game of life implementation in JavaScript.
I never truly verified it…"/><meta data-react-helmet="true" property="og:title" content="Writing JavaScript Behavioral Unit Tests"/><meta data-react-helmet="true" property="og:description" content="When going through some old projects I realized that I hadn’t particularly kept
up with my game of life implementation in JavaScript.
I never truly verified it…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="James Ward"/><meta data-react-helmet="true" name="twitter:title" content="Writing JavaScript Behavioral Unit Tests"/><meta data-react-helmet="true" name="twitter:description" content="When going through some old projects I realized that I hadn’t particularly kept
up with my game of life implementation in JavaScript.
I never truly verified it…"/><style data-href="/styles.6cefde16d642defe16b1.css" data-identity="gatsby-global-css">@font-face{font-display:swap;font-family:Prociono;font-style:normal;font-weight:400;src:local("Prociono Regular "),local("Prociono-Regular"),url(/static/prociono-latin-400-006a7e8d8c9142e881857df1684cb2a6.woff2) format("woff2"),url(/static/prociono-latin-400-25b463cc6d67643e255302c49c589862.woff) format("woff")}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#f8f8f2;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;text-shadow:0 1px rgba(0,0,0,.3);white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><style data-styled="" data-styled-version="6.1.0">.fypOJt{list-style:none;display:inline-block;text-transform:uppercase;font-weight:bold;letter-spacing:2px;font-size:12px;line-height:12px;margin:0;}/*!sc*/
.fypOJt a{background-color:#FFF;margin:0 1em;padding:0 0.8em;color:#222;text-decoration:none;}/*!sc*/
.fypOJt a:hover{text-decoration:underline;}/*!sc*/
data-styled.g1[id="layout__NavigationItem-sc-1i3m2x4-0"]{content:"fypOJt,"}/*!sc*/
.SNuPw{position:relative;margin-top:-42px;}/*!sc*/
@media print{.SNuPw{display:none;}}/*!sc*/
data-styled.g2[id="layout__LayoutHeaderContainer-sc-1i3m2x4-1"]{content:"SNuPw,"}/*!sc*/
.bqNgjd{margin-left:auto;margin-right:auto;max-width:52.5rem;padding:2.625rem 1.3125rem;}/*!sc*/
@page{margin:0 0;}/*!sc*/
@media print{.bqNgjd{max-width:max-content;padding:8mm 10mm!important;margin:0!important;}}/*!sc*/
data-styled.g3[id="layout__LayoutContainer-sc-1i3m2x4-2"]{content:"bqNgjd,"}/*!sc*/
.loVcMV{font-size:16px;position:absolute;display:block;overflow:hidden;width:100px;height:1.2em;top:-0.2em;right:0;margin:0 0 1.75rem;}/*!sc*/
.loVcMV .date,.loVcMV .time{padding-left:8px;background-color:#FFF;position:absolute;right:0;transition:top 0.2s;}/*!sc*/
.loVcMV .date{top:0;}/*!sc*/
.loVcMV .time{top:100%;}/*!sc*/
.loVcMV:hover .date,.loVcMV:focus .date{top:-100%;}/*!sc*/
.loVcMV:hover .time,.loVcMV:focus .time{top:0;}/*!sc*/
data-styled.g4[id="blog-post__BlogPostTimestampContainer-sc-1c33wts-0"]{content:"loVcMV,"}/*!sc*/
.dgChiX{position:relative;height:8px;margin-bottom:36px;border-bottom:1px solid #222;}/*!sc*/
data-styled.g5[id="blog-post__BlogPostHeaderContainer-sc-1c33wts-1"]{content:"dgChiX,"}/*!sc*/
.eLVbfZ{background-color:#FFF;float:left;line-height:14px;font-size:12px;letter-spacing:2px;text-transform:uppercase;padding-right:6px;margin:0;}/*!sc*/
data-styled.g6[id="blog-post__BlogPostHeaderH1-sc-1c33wts-2"]{content:"eLVbfZ,"}/*!sc*/
.ioHvGm{text-decoration:none;}/*!sc*/
.ioHvGm:hover{text-decoration:underline;}/*!sc*/
data-styled.g7[id="blog-post__BlogPostHeaderLink-sc-1c33wts-3"]{content:"ioHvGm,"}/*!sc*/
.hTvFTe p code{padding:3px 6px;}/*!sc*/
.hTvFTe .gatsby-highlight{position:relative;margin-bottom:1.75rem;padding:16px 0;border-top:1px solid #222;border-bottom:1px solid #222;}/*!sc*/
.hTvFTe .gatsby-highlight:before{content:"Code";display:inline-block;position:absolute;top:-7px;left:0;text-transform:uppercase;font-size:10px;line-height:12px;padding-right:8px;letter-spacing:2px;background:#FFF;}/*!sc*/
.hTvFTe .gatsby-highlight[data-language]:before{content:attr(data-language);}/*!sc*/
.hTvFTe .gatsby-highlight pre{margin-bottom:0;}/*!sc*/
data-styled.g9[id="blog-post__BlogPostContent-sc-1c33wts-5"]{content:"hTvFTe,"}/*!sc*/
</style><link rel="icon" href="/favicon-32x32.png?v=db4de95c6680047f2bb2b3b86380467c" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=db4de95c6680047f2bb2b3b86380467c"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=db4de95c6680047f2bb2b3b86380467c"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=db4de95c6680047f2bb2b3b86380467c"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=db4de95c6680047f2bb2b3b86380467c"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=db4de95c6680047f2bb2b3b86380467c"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=db4de95c6680047f2bb2b3b86380467c"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=db4de95c6680047f2bb2b3b86380467c"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=db4de95c6680047f2bb2b3b86380467c"/><title data-react-helmet="true">Writing JavaScript Behavioral Unit Tests | DEFINITIVELY NOT JAMES</title><link href="//fonts.googleapis.com/css?family=Prociono:400,400i,700,700i,900,900i" rel="stylesheet" type="text/css"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout__LayoutContainer-sc-1i3m2x4-2 bqNgjd"><header class="layout__LayoutHeaderContainer-sc-1i3m2x4-1 SNuPw"><h1 class="title" style="line-height:70px;font-size:50px;font-weight:200;text-transform:uppercase;text-align:center"><a style="text-decoration:none;color:inherit;margin:0 auto;position:relative;white-space:nowrap;padding-right:30px" href="/"><span class="long-word">Definitively</span> Not<span class="my-name" style="font-size:12px;position:absolute;top:0;right:-14px;transform:rotate(-90deg)">( James )</span></a></h1><nav style="margin-top:8px;margin-bottom:32px;line-height:6px;height:6px;border-bottom:1px solid black"><ul style="text-align:center;margin:0;padding:0"><li class="layout__NavigationItem-sc-1i3m2x4-0 fypOJt"><a href="/blog/">Blog</a></li><li class="layout__NavigationItem-sc-1i3m2x4-0 fypOJt"><a href="/resume/">Resume</a></li><li class="layout__NavigationItem-sc-1i3m2x4-0 fypOJt"><a href="/lets-chat/">Let&#x27;s Chat</a></li><li class="layout__NavigationItem-sc-1i3m2x4-0 fypOJt"><a href="/on-my-mind/">On My Mind..</a></li></ul></nav></header><main><article><header class="blog-post__BlogPostHeaderContainer-sc-1c33wts-1 dgChiX"><h1 class="blog-post__BlogPostHeaderH1-sc-1c33wts-2 eLVbfZ"><a aria-current="page" class="blog-post__BlogPostHeaderLink-sc-1c33wts-3 ioHvGm" href="/blog/writing-javascript-behavioral-unit-tests/">Writing JavaScript Behavioral Unit Tests</a></h1><h2 class="blog-post__BlogPostTimestampContainer-sc-1c33wts-0 loVcMV"><span class="date">2014/09/28</span><span class="time">16:00 UTC</span></h2></header><section class="blog-post__BlogPostContent-sc-1c33wts-5 hTvFTe"><p>When going through some old projects I realized that I hadn’t particularly kept
up with my <a href="/gameoflife.js">game of life</a> implementation in JavaScript.
I never truly verified it worked.  Sure, it <em>looks</em> like it worked
but how would I know for sure that it did?  Behavioral unit tests to the rescue.</p>
<ul>
<li>Any live cell with fewer than two live neighbors dies, as if caused by under-population.</li>
<li>Any live cell with two or three live neighbors lives on to the next generation.</li>
<li>Any live cell with more than three live neighbors dies, as if by overcrowding.</li>
<li>Any dead cell with exactly three live neighbors becomes a live cell, as if by reproduction.</li>
</ul>
<p>This is a good representation of the behavior that should be exhibited by
<a href="http://wikipedia.org/wiki/Conway%27s_Game_of_Life">Conway’s Game of Life</a> in plain, understandable English.
However, we are engineers!  We have to come up with some overly abstract and
strict way to represent these behaviors.  We need a specification.</p>
<h2 id="behavioral-specifications" style="position:relative;"><a href="#behavioral-specifications" aria-label="behavioral specifications permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Behavioral Specifications</h2>
<p>A behavioral specification is a document, not dissimilar from pseudo code, which
describes the expected behavior of a software unit.  While not entirely
necessary for writing tests these documents can flesh out what tests are needed
and reveal issues that may not be obvious otherwise.  As crazy as it may sound
it also creates a way for someone that is less technical to not only understand
what your tests do, but also verify that they match every behavior that is
expected of the system.</p>
<p>While there is no right or wrong way to write a behavior specification, the
<a href="http://dannorth.net/whats-in-a-story/">structure proposed by Dan North</a> is clear,
concise, and uniform.</p>
<div class="gatsby-highlight" data-language="text"><pre style="counter-reset: linenumber NaN" class="language-text line-numbers"><code class="language-text">Story: Game of Life

As a cellular automaton simulation
I want to follow the rules of Conway's Game of Life
So that we are able to simulate simple life

Scenario 1: Game of Life should kill lonely cells
Given that a cell is alive
 And that cell has no live neighbors
When a simulation step has executed
Then that cell should die

Scenario 2: Game of Life should kill cells with only one neighbor
Given that a cell is alive
 And that cell has exactly one live neighbor
When a simulation step has executed
Then that cell should die

Scenario 3: Game of Life should leave cells with two neighbors alone
Given that a cell is alive
 And that cell has two live neighbors
When a simulation step has executed
Then that cell should continue to live

Scenario 4: Game of Life should leave cells with three neighbors alone
Given that a cell is alive
 And that cell has three live neighbors
When a simulation step has executed
Then that cell should continue to live

Scenario 5: Game of Life should kill overpopulated cells
Given that a cell is alive
 And that cell has more than three live neighbors
When a simulation step has executed
Then that cell should die

Scenario 6: Game of Life should reproduce into cells with exactly three live neighbors
Given that a cell is dead
 And that cell has exactly three live neighbors
When a simulation step has executed
Then that cell should be given life</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h2 id="writing-the-tests" style="position:relative;"><a href="#writing-the-tests" aria-label="writing the tests permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Writing The Tests</h2>
<p>Writing unit tests in Jasmine is dead simple.  The hard part is   Just a minor translation.  We start by creating the directory <code class="language-text">specs</code>
and adding the file for our story in it, <code class="language-text">gameoflife.js</code>.  We can start by
adding in a basic description of our story, as well as set up which will be used
by all of our tests.</p>
<p>To create a group of specs which will be our story, Jasmine provides <code class="language-text">describe</code>,
which accepts a description string and a callback.  Because the callback is
a normal JavaScript function we can define variables inside it which is exposed
to all of the specs.  The set up is achieved by using the <code class="language-text">beforeEach</code> function
provided by Jasmine with the describe callback.</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Game of Life'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// As a cellular automaton</span>
    <span class="token comment">// I want to follow the rules of Conway's Game of Life</span>
    <span class="token comment">// So that we are able to simulate simple life</span>

    <span class="token keyword">var</span> game<span class="token punctuation">;</span>

    <span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        game <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameOfLife</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// No scenarios have been defined yet, but this is where they would go!</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>For the most part the scenario test should be as basic as possible.  They have
already been defined in our Behavioral specification document, and can be
translated to our Jasmine tests.  The scenarios match up with specs using the
Jasmine provided function <code class="language-text">it</code>.</p>
<p>To verify behavior expectations are key to the tests, and the <code class="language-text">expect</code> function
can be used.  Expectations in jasmine take the actual value as a parameter and
use method chaining to create matches.  There are many
<a href="http://jasmine.github.io/2.0/introduction.html#section-Included_Matchers">matchers included by default</a> in Jasmine, but those
used most often are <code class="language-text">toBe</code> and <code class="language-text">toEqual</code>.  While similar there is a definite
difference: <code class="language-text">toBe</code> tests if an actual matches a given expected result with <code class="language-text">===</code>
and <code class="language-text">toEqual</code> tests if an actual matches a given expected result with <code class="language-text">==</code>.</p>
<p>For example, scenario 1 and 2 could be represented with the following specs:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token comment">// Scenario 1</span>
<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should kill lonely cells'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Given that a cell is alive</span>
    game<span class="token punctuation">.</span><span class="token function">spawnCell</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// And that cell has no live neighbors</span>
    game<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// When a simulation step has executed</span>
    game<span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Then that cell should die</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>game<span class="token punctuation">.</span><span class="token function">getInhabitants</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Scenario 2</span>
<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should kill cells with only one neighbor'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Given that a cell is alive</span>
    game<span class="token punctuation">.</span><span class="token function">spawnCell</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// And that cell has exactly one live neighbor</span>
    game<span class="token punctuation">.</span><span class="token function">spawnCell</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    game<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// When a simulation step has executed</span>
    game<span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Then that cell should die</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>game<span class="token punctuation">.</span><span class="token function">getInhabitants</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Notice that the <code class="language-text">game</code> variable has already been initiated in the <code class="language-text">beforeEach</code>
function in the spec definition, so we can use it in our scenario.  We use
<code class="language-text">expect</code> - passing in <code class="language-text">game.getInhabitants().length</code> - and use Jasmine’s
<a href="http://jasmine.github.io/2.0/introduction.html#section-Included_Matchers">matching API</a> to verify that it is equal to <code class="language-text">0</code>.
While not absolutely necessary, they also include the original document as
comments, to explain what the test is trying to do in case the tests are ever
questioned.</p>
<p>While this is a fraction of the scenarios, they all can be written in similar
fashion.  For the complete version of these specs written in Jasmine,
<a href="https://github.com/imnotjames/gameoflife.js/blob/master/specs/gameoflife.js">check them out on GitHub.</a></p>
<h2 id="npm-and-grunt-in-5-minutes" style="position:relative;"><a href="#npm-and-grunt-in-5-minutes" aria-label="npm and grunt in 5 minutes permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>NPM and Grunt in 5 minutes</h2>
<p>While using NPM and grunt are not needed for using Jasmine it does simplify the
experience.  It takes a small amount of work getting it up and running but
could be an article in itself.  However, in just a couple minutes you can go
from arduously initiating tests manually to having grunt fly through them.  It
also bypasses the need of having a web browser open to run the tests by using
<a href="http://phantomjs.org/">phantomJS</a> - a definite win.  If you haven’t already you should
<a href="http://nodejs.org/download/">install node</a> now.</p>
<p>If don’t have a <code class="language-text">package.json</code> file you can generate one with
<a href="https://www.npmjs.org/doc/cli/npm-init.html"><code class="language-text">npm init</code></a>.  To add the <code class="language-text">grunt</code> and <code class="language-text">grunt-contrib-jasmine</code>
dependencies you can run the command
<code class="language-text">npm install grunt grunt-contrib-jasmine --save-dev</code> or manually edit the
package file. If you need to know anything else about the <code class="language-text">package.json</code>
file, you can always consult the
<a href="https://www.npmjs.org/doc/files/package.json.html">npm documentation on the subject</a>.  Once you’re
satisfied with your <code class="language-text">package.json</code> running <code class="language-text">npm install</code> should fetch Jasmine,
grunt, and the grunt Jasmine task if you haven’t installed them already.</p>
<p>However, you still need a <code class="language-text">Gruntfile.js</code> to run the tests.  The <code class="language-text">Gruntfile</code>
initializes the various tasks including our test runner.  The following is an
example <code class="language-text">Gruntfile</code> which assumes your Jasmine specs are in <code class="language-text">/specs/</code>.</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">grunt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">jasmine</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">src</span> <span class="token operator">:</span> <span class="token string">'src/**/*.js'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">specs</span> <span class="token operator">:</span> <span class="token string">'specs/**/*.js'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    grunt<span class="token punctuation">.</span>task<span class="token punctuation">.</span><span class="token function">registerTask</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span> <span class="token string">'jasmine'</span> <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">'grunt-contrib-jasmine'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>This is a very basic example which only runs the Jasmine tests.  Grunt can do a
wide variety of tasks.  More information on setting up tasks in a
<code class="language-text">Gruntfile</code> can be found in the <a href="http://gruntjs.com/getting-started">Grunt Documentation</a>.</p>
<h2 id="integrating-with-travis-ci" style="position:relative;"><a href="#integrating-with-travis-ci" aria-label="integrating with travis ci permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Integrating with Travis CI</h2>
<p>Continuous integration is an important part of keeping up to date with the
status of your software build.  Not only does it never forget to run your unit
tests, it runs them on many different environments at the same time.
Travis CI has an in <a href="http://docs.travis-ci.com/user/languages/javascript-with-nodejs/">in-depth reference</a>  on their
integration with node.js for a multitude of complex set ups. For anyone else
who just wants to get the Jasmine tests up and running with Travis CI, it’s one
of the more basic things to do.</p>
<p>By default Travis calls <code class="language-text">npm test</code>, which refers to a predefined script. Add to
the <code class="language-text">package.json</code> a <code class="language-text">scripts</code> section and within that scripts section you must
define how you want your tests to be run.  Because grunt was configured with a
task called test in the <code class="language-text">Gruntfile</code> above, adding <code class="language-text">grunt test</code> should be
sufficient.  For extra measure, and to aid in resolving any failures it is
a good rule of thumb to enable as much verbosity as possible.</p>
<div class="gatsby-highlight" data-language="json"><pre style="counter-reset: linenumber NaN" class="language-json line-numbers"><code class="language-json">  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"grunt test --verbose"</span>
  <span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>However, changes to the package definition alone won’t get a project ready to
be ran.  To tell Travis what language this is and how the environment must be
set up a <code class="language-text">.travis.yml</code> file is required.</p>
<div class="gatsby-highlight" data-language="yaml"><pre style="counter-reset: linenumber NaN" class="language-yaml line-numbers"><code class="language-yaml"><span class="token key atrule">language</span><span class="token punctuation">:</span> node_js
<span class="token key atrule">node_js</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">"0.11"</span>
  <span class="token punctuation">-</span> <span class="token string">"0.10"</span>
  <span class="token punctuation">-</span> <span class="token string">"0.8"</span>
<span class="token key atrule">before_install</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">"npm update -g npm"</span>
  <span class="token punctuation">-</span> <span class="token string">"npm install -g grunt-cli"</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>The amount of customization that can be done with the configuration file can be
a little overwhelming, but most everything that anyone could ever want to know
about Travis is in their  <a href="http://docs.travis-ci.com/">documentation</a>.  However, with those two
changes in place all it takes is a commit, a push, and you can sign into Travis
and get it to start running continuous integration like all of those fancy
pants engineers.</p>
<h2 id="the-point-of-it-all" style="position:relative;"><a href="#the-point-of-it-all" aria-label="the point of it all permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Point of it All</h2>
<p>At the end of the day software that is written is worthless if it doesn’t behave
as it’s supposed to.  Even if broken software is better than no software, part
of being a professional is holding yourself to a higher standard than
“adequate”.  With everything set up not only can you verify after every change
that you’ve not broken the behavior of your systems, you also get feedback on
all commits automatically through Travis or other Continuous Integration
systems.  Nobody is always perfect, so testing is a valuable safety net for
when humanity hits and mistakes are made.</p>
<p>Most of all, breaking the build should be lauded as a learning experience, not
shunned as a failure.</p></section><footer></footer></article><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/blog/print_r-is-terrible/">← <!-- -->print_r is terrible</a></li><li><a rel="next" href="/blog/new-team-kick-start/">New Team Kick Start<!-- --> →</a></li></ul></nav></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/writing-javascript-behavioral-unit-tests/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-b89dac131af5940a8aa4.js\"],\"component---src-pages-404-js\":[\"/component---src-pages-404-js-1d635f815f1085a5be7c.js\"],\"component---src-pages-blog-js\":[\"/component---src-pages-blog-js-e0eea215353d7aaa02b6.js\"],\"component---src-pages-index-js\":[\"/component---src-pages-index-js-17336813536dc8f16692.js\"],\"component---src-pages-lets-chat-js\":[\"/component---src-pages-lets-chat-js-1e8bb0a75cb631f887a9.js\"],\"component---src-pages-on-my-mind-js\":[\"/component---src-pages-on-my-mind-js-a3febad0ff332de29a8c.js\"],\"component---src-pages-resume-js\":[\"/component---src-pages-resume-js-6a6ea896b5079b023484.js\"],\"component---src-templates-blog-post-js\":[\"/component---src-templates-blog-post-js-e530529775031177a561.js\"],\"component---src-templates-on-my-mind-thought-js\":[\"/component---src-templates-on-my-mind-thought-js-de84052069770000789a.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="57123734cadef72221f9";</script><script src="/webpack-runtime-3993739098a5e8e5be53.js" async></script><script src="/framework-3d39d33798f594700d1d.js" async></script><script src="/app-b89dac131af5940a8aa4.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>